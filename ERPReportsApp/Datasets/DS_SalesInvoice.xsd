<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="DS_SalesInvoice" targetNamespace="http://tempuri.org/DS_SalesInvoice.xsd" xmlns:mstns="http://tempuri.org/DS_SalesInvoice.xsd" xmlns="http://tempuri.org/DS_SalesInvoice.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop" attributeFormDefault="qualified" elementFormDefault="qualified">
  <xs:annotation>
    <xs:appinfo source="urn:schemas-microsoft-com:xml-msdatasource">
      <DataSource DefaultConnectionIndex="0" FunctionsComponentName="QueriesTableAdapter" Modifier="AutoLayout, AnsiClass, Class, Public" SchemaSerializationMode="IncludeSchema" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
        <Connections>
          <Connection AppSettingsObjectName="Web.config" AppSettingsPropertyName="ConnectionString" ConnectionStringObject="" IsAppSettingsProperty="true" Modifier="Assembly" Name="ConnectionString (Web.config)" PropertyReference="AppConfig.System.Configuration.ConfigurationManager.0.ConnectionStrings.ConnectionString.ConnectionString" Provider="System.Data.OleDb" />
        </Connections>
        <Tables>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="DataTable1TableAdapter" GeneratorDataComponentClassName="DataTable1TableAdapter" Name="DataTable1" UserDataComponentName="DataTable1TableAdapter">
            <MainSource>
              <DbSource ConnectionRef="ConnectionString (Web.config)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="Fill" GenerateMethods="Both" GenerateShortCommands="false" GeneratorGetMethodName="GetData" GeneratorSourceName="Fill" GetMethodModifier="Public" GetMethodName="GetData" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="Fill">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT sinvid.InvoiceID, si.InvoiceDate, SUM(sinvid.Qty) as Qty, sod.Color, sod.[Standard], so.PONumber, so.SalesContractNumber, so.JobNumber, so.ID as BTNumber,
		c.Title as CountName, CONCAT(v.Title, ' (', v.[Value],')') as VolumeName, sinvid.Rate,
		sinvid.DiscountPercentage, sinvid.Currency, sinvid.[Status],
		cus.FullName as CustomerName, cus.[Address] as CustomerAddress, cus.GST as CustomerGST, cus.NTN as CustomerNTN,
		cus.Email as CustomerEmail, cus.PaymentTerms as CustomerPaymentTerms, cus.Phone as CustomerPhone,
		ISNULL((SELECT TOP 1 CASE WHEN t.[TaxNature] = 'Addition' THEN sit.TaxPercentage ELSE -1 * sit.TaxPercentage END
					FROM [SalesInvoiceTax] sit
					JOIN [Tax] t ON sit.TaxID = t.ID AND sit.CompanyCode = t.CompanyCode AND t.IsDelete = 0
					WHERE sit.InvoiceID = sinvid.InvoiceID AND t.Title IN ('Sales Tax', 'GST', 'SalesTax', 'Sale Tax') AND sit.[CompanyCode] = sinvid.CompanyCode AND sit.IsDelete = 0), 0.00) as SalesTax
FROM [SalesInvoiceDetail] sinvid
JOIN [SalesInvoice] si ON si.ID = sinvid.InvoiceID AND si.CompanyCode = sinvid.CompanyCode AND si.IsDelete = 0
JOIN [DeliveryChallanDetail] dcd ON sinvid.DeliveryChallanDetailID = dcd.ID AND sinvid.CompanyCode = dcd.CompanyCode AND dcd.IsDelete = 0
JOIN [DeliveryChallan] dc ON dc.ID = dcd.DeliveryChallanID AND dc.CompanyCode = dcd.CompanyCode AND dc.IsDelete = 0
JOIN [SalesOrderDetail] sod ON dcd.SalesOrderDetailID = sod.ID AND dcd.CompanyCode = sod.CompanyCode AND sod.IsDelete = 0
JOIN [SalesOrder] so ON sod.SalesOrderID = so.ID AND sod.CompanyCode = so.CompanyCode AND so.IsDelete = 0
JOIN [Customer] cus ON cus.ID = so.CustomerID AND cus.CompanyCode = so.CompanyCode AND cus.IsDelete = 0
JOIN [Count] c ON c.ID = sod.CountID AND c.CompanyCode = sod.CompanyCode AND c.IsDelete = 0
JOIN [Volume] v ON v.ID = sod.VolumeID AND v.CompanyCode = sod.CompanyCode AND v.IsDelete = 0
WHERE sinvid.InvoiceID = ? AND sinvid.CompanyCode = ? AND sinvid.IsDelete = 0
GROUP BY sinvid.InvoiceID, si.InvoiceDate, sod.Color, sod.[Standard], so.PONumber, so.SalesContractNumber, so.JobNumber, so.ID, c.Title,
		v.Title, v.[Value], sinvid.Rate, sinvid.CompanyCode,
		sinvid.DiscountPercentage, sinvid.Currency, sinvid.[Status],
		cus.FullName, cus.[Address], cus.GST, cus.NTN,
		cus.Email, cus.PaymentTerms, cus.Phone</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="Param1" ColumnName="InvoiceID" DataSourceName="ERPApp_DB.dbo.SalesInvoiceDetail" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="InvoiceID" Precision="0" ProviderType="Integer" Scale="0" Size="4" SourceColumn="InvoiceID" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="Param2" ColumnName="CompanyCode" DataSourceName="ERPApp_DB.dbo.SalesInvoiceDetail" DataTypeServer="varchar(50)" DbType="AnsiString" Direction="Input" ParameterName="CompanyCode" Precision="0" ProviderType="Char" Scale="0" Size="50" SourceColumn="CompanyCode" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="Color" DataSetColumn="Color" />
              <Mapping SourceColumn="CountName" DataSetColumn="CountName" />
              <Mapping SourceColumn="VolumeName" DataSetColumn="VolumeName" />
              <Mapping SourceColumn="Rate" DataSetColumn="Rate" />
              <Mapping SourceColumn="DiscountPercentage" DataSetColumn="DiscountPercentage" />
              <Mapping SourceColumn="Currency" DataSetColumn="Currency" />
              <Mapping SourceColumn="Status" DataSetColumn="Status" />
              <Mapping SourceColumn="CustomerName" DataSetColumn="CustomerName" />
              <Mapping SourceColumn="CustomerAddress" DataSetColumn="CustomerAddress" />
              <Mapping SourceColumn="CustomerGST" DataSetColumn="CustomerGST" />
              <Mapping SourceColumn="CustomerNTN" DataSetColumn="CustomerNTN" />
              <Mapping SourceColumn="CustomerEmail" DataSetColumn="CustomerEmail" />
              <Mapping SourceColumn="CustomerPaymentTerms" DataSetColumn="CustomerPaymentTerms" />
              <Mapping SourceColumn="CustomerPhone" DataSetColumn="CustomerPhone" />
              <Mapping SourceColumn="InvoiceID" DataSetColumn="InvoiceID" />
              <Mapping SourceColumn="InvoiceDate" DataSetColumn="InvoiceDate" />
              <Mapping SourceColumn="Standard" DataSetColumn="Standard" />
              <Mapping SourceColumn="Qty" DataSetColumn="Qty" />
              <Mapping SourceColumn="SalesTax" DataSetColumn="SalesTax" />
              <Mapping SourceColumn="PONumber" DataSetColumn="PONumber" />
              <Mapping SourceColumn="SalesContractNumber" DataSetColumn="SalesContractNumber" />
              <Mapping SourceColumn="JobNumber" DataSetColumn="JobNumber" />
              <Mapping SourceColumn="BTNumber" DataSetColumn="BTNumber" />
            </Mappings>
            <Sources />
          </TableAdapter>
        </Tables>
        <Sources />
      </DataSource>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="DS_SalesInvoice" msdata:IsDataSet="true" msdata:UseCurrentLocale="true" msprop:EnableTableAdapterManager="true" msprop:Generator_DataSetName="DS_SalesInvoice" msprop:Generator_UserDSName="DS_SalesInvoice">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="DataTable1" msprop:Generator_TableClassName="DataTable1DataTable" msprop:Generator_TableVarName="tableDataTable1" msprop:Generator_TablePropName="DataTable1" msprop:Generator_RowDeletingName="DataTable1RowDeleting" msprop:Generator_RowChangingName="DataTable1RowChanging" msprop:Generator_RowEvHandlerName="DataTable1RowChangeEventHandler" msprop:Generator_RowDeletedName="DataTable1RowDeleted" msprop:Generator_UserTableName="DataTable1" msprop:Generator_RowChangedName="DataTable1RowChanged" msprop:Generator_RowEvArgName="DataTable1RowChangeEvent" msprop:Generator_RowClassName="DataTable1Row">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Color" msprop:Generator_ColumnVarNameInTable="columnColor" msprop:Generator_ColumnPropNameInRow="Color" msprop:Generator_ColumnPropNameInTable="ColorColumn" msprop:Generator_UserColumnName="Color">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CountName" msprop:Generator_ColumnVarNameInTable="columnCountName" msprop:Generator_ColumnPropNameInRow="CountName" msprop:Generator_ColumnPropNameInTable="CountNameColumn" msprop:Generator_UserColumnName="CountName">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="VolumeName" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnVolumeName" msprop:Generator_ColumnPropNameInRow="VolumeName" msprop:Generator_ColumnPropNameInTable="VolumeNameColumn" msprop:Generator_UserColumnName="VolumeName" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="163" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Rate" msprop:Generator_ColumnVarNameInTable="columnRate" msprop:Generator_ColumnPropNameInRow="Rate" msprop:Generator_ColumnPropNameInTable="RateColumn" msprop:Generator_UserColumnName="Rate" type="xs:decimal" minOccurs="0" />
              <xs:element name="DiscountPercentage" msprop:Generator_ColumnVarNameInTable="columnDiscountPercentage" msprop:Generator_ColumnPropNameInRow="DiscountPercentage" msprop:Generator_ColumnPropNameInTable="DiscountPercentageColumn" msprop:Generator_UserColumnName="DiscountPercentage" type="xs:decimal" minOccurs="0" />
              <xs:element name="Currency" msprop:nullValue="_empty" msprop:Generator_ColumnPropNameInRow="Currency" msprop:Generator_ColumnVarNameInTable="columnCurrency" msprop:Generator_ColumnPropNameInTable="CurrencyColumn" msprop:Generator_UserColumnName="Currency" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="15" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Status" msprop:Generator_ColumnVarNameInTable="columnStatus" msprop:Generator_ColumnPropNameInRow="Status" msprop:Generator_ColumnPropNameInTable="StatusColumn" msprop:Generator_UserColumnName="Status" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CustomerName" msprop:Generator_ColumnVarNameInTable="columnCustomerName" msprop:Generator_ColumnPropNameInRow="CustomerName" msprop:Generator_ColumnPropNameInTable="CustomerNameColumn" msprop:Generator_UserColumnName="CustomerName">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CustomerAddress" msprop:Generator_ColumnVarNameInTable="columnCustomerAddress" msprop:Generator_ColumnPropNameInRow="CustomerAddress" msprop:Generator_ColumnPropNameInTable="CustomerAddressColumn" msprop:Generator_UserColumnName="CustomerAddress">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CustomerGST" msprop:Generator_ColumnVarNameInTable="columnCustomerGST" msprop:Generator_ColumnPropNameInRow="CustomerGST" msprop:Generator_ColumnPropNameInTable="CustomerGSTColumn" msprop:Generator_UserColumnName="CustomerGST">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CustomerNTN" msprop:Generator_ColumnVarNameInTable="columnCustomerNTN" msprop:Generator_ColumnPropNameInRow="CustomerNTN" msprop:Generator_ColumnPropNameInTable="CustomerNTNColumn" msprop:Generator_UserColumnName="CustomerNTN">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CustomerEmail" msprop:Generator_ColumnVarNameInTable="columnCustomerEmail" msprop:Generator_ColumnPropNameInRow="CustomerEmail" msprop:Generator_ColumnPropNameInTable="CustomerEmailColumn" msprop:Generator_UserColumnName="CustomerEmail">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CustomerPaymentTerms" msprop:Generator_ColumnVarNameInTable="columnCustomerPaymentTerms" msprop:Generator_ColumnPropNameInRow="CustomerPaymentTerms" msprop:Generator_ColumnPropNameInTable="CustomerPaymentTermsColumn" msprop:Generator_UserColumnName="CustomerPaymentTerms" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="200" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CustomerPhone" msprop:Generator_ColumnVarNameInTable="columnCustomerPhone" msprop:Generator_ColumnPropNameInRow="CustomerPhone" msprop:Generator_ColumnPropNameInTable="CustomerPhoneColumn" msprop:Generator_UserColumnName="CustomerPhone">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="InvoiceID" msprop:Generator_ColumnVarNameInTable="columnInvoiceID" msprop:Generator_ColumnPropNameInRow="InvoiceID" msprop:Generator_ColumnPropNameInTable="InvoiceIDColumn" msprop:Generator_UserColumnName="InvoiceID" type="xs:int" minOccurs="0" />
              <xs:element name="InvoiceDate" msprop:Generator_ColumnVarNameInTable="columnInvoiceDate" msprop:Generator_ColumnPropNameInRow="InvoiceDate" msprop:Generator_ColumnPropNameInTable="InvoiceDateColumn" msprop:Generator_UserColumnName="InvoiceDate" type="xs:dateTime" minOccurs="0" />
              <xs:element name="Standard" msprop:Generator_ColumnVarNameInTable="columnStandard" msprop:Generator_ColumnPropNameInRow="Standard" msprop:Generator_ColumnPropNameInTable="StandardColumn" msprop:Generator_UserColumnName="Standard" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Qty" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnQty" msprop:Generator_ColumnPropNameInRow="Qty" msprop:Generator_ColumnPropNameInTable="QtyColumn" msprop:Generator_UserColumnName="Qty" type="xs:decimal" minOccurs="0" />
              <xs:element name="SalesTax" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnSalesTax" msprop:Generator_ColumnPropNameInRow="SalesTax" msprop:Generator_ColumnPropNameInTable="SalesTaxColumn" msprop:Generator_UserColumnName="SalesTax" type="xs:decimal" minOccurs="0" />
              <xs:element name="PONumber" msprop:Generator_ColumnVarNameInTable="columnPONumber" msprop:Generator_ColumnPropNameInRow="PONumber" msprop:Generator_ColumnPropNameInTable="PONumberColumn" msprop:Generator_UserColumnName="PONumber" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="SalesContractNumber" msprop:Generator_ColumnVarNameInTable="columnSalesContractNumber" msprop:Generator_ColumnPropNameInRow="SalesContractNumber" msprop:Generator_ColumnPropNameInTable="SalesContractNumberColumn" msprop:Generator_UserColumnName="SalesContractNumber" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="JobNumber" msprop:Generator_ColumnVarNameInTable="columnJobNumber" msprop:Generator_ColumnPropNameInRow="JobNumber" msprop:Generator_ColumnPropNameInTable="JobNumberColumn" msprop:Generator_UserColumnName="JobNumber" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="BTNumber" msdata:ReadOnly="true" msdata:AutoIncrement="true" msdata:AutoIncrementSeed="-1" msdata:AutoIncrementStep="-1" msprop:Generator_ColumnVarNameInTable="columnBTNumber" msprop:Generator_ColumnPropNameInRow="BTNumber" msprop:Generator_ColumnPropNameInTable="BTNumberColumn" msprop:Generator_UserColumnName="BTNumber" type="xs:int" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema>